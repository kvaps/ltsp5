.TH "ltsp\-update\-image" "8" "2012-05-29"
.SH "NAME"
ltsp\-update\-image \- Generate an NBD image from an LTSP chroot

.SH "SYNOPSIS"
.PP
\fBltsp\-update\-image\fR [OPTION] [CHROOT...]

.SH "DESCRIPTION"
.PP
\fBltsp\-update\-image\fR generates a compressed squashfs image from an LTSP
chroot and exports it with \fBnbd-server\fP(1).
CHROOT can be a full path or a subdirectory of the /opt/ltsp base directory,
and it defaults to the host architecture if unset.

.SH "OPTIONS"
.PP
.IP "\fB\-b\fP \fB\-\-base=\fP"
The LTSP base directory. Defaults to "/opt/ltsp".

.IP "\fB\-c\fP \fB\-\-cleanup\fP"
Temporarily remove user accounts, logs, caches etc from
the chroot before exporting the image. The chroot arch
is required to be compatible with the server arch.

.IP "\fB\-d\fP \fB\-\-tftp-boot-dir=\fP"
The LTSP subdirectory within the TFTP base directory.
Defaults to "ltsp".

.IP "\fB\-e\fP \fB\-\-exclude=\fP"
List of dirs/files to exclude from the image.
This is in addition to /etc/ltsp/ltsp\-update\-image.excludes.

.IP "\fB\-f\fP \fB\-\-config\-nbd\fP"
Generate appropriate nbd-server configuration files.
It's automatically set if NFS isn't used or if other LTSP
generated nbd-server configuration files already exist.

.IP "\fB\-h\fP \fB\-\-help\fP"
The application help page.

.IP "\fB\-m\fP \fB\-\-no\-compress\fP"
Don't compress the generated image.

.IP "\fB\-n\fP \fB\-\-no\-backup\fP"
Don't backup chroot.img to chroot.img.old.

.IP "\fB\-r\fP \fB\-\-revert\fP"
Swap chroot.img with chroot.img.old and update kernels.

.SH "SEE ALSO"
.PP
\fBltsp\-build\-client\fP(8),
\fBltsp\-update\-kernels\fP(8),
\fBltsp\-update\-sshkeys\fP(8),
\fBmksquashfs\fP(1),
\fBnbd\-server\fP(1).

.SH "AVAILABILITY"
.PP 
\fBltsp\-update\-image\fR is part of \fBltsp\fP package and the latest versions
are available in source form from \fIhttps://launchpad.net/ltsp\fR. 

.SH "MAN PAGE AUTHOR"
.PP 
Copyright 2012 Alkis Georgopoulos <alkisg@gmail.com>, distributed under
the terms of the GNU General Public License version 2 or any later version.
